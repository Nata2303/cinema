{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,wBAIA,MAAMC,EAAOC,SAASC,cAAc,4BAC9BC,EAAO,IAAIC,KAEXC,EAAcC,OAAOC,WAiDnB,SAACC,EAAyBC,EAAKC,GACrC,OAAOD,EACJE,KACC,EAACC,GACCA,EAAEC,MACFA,EAAKC,YACLA,EAAWC,aACXA,EAAYC,aACZA,EAAYC,UACZA,KACI,kGACiCH,aAAuBD,6IAG7BA,+DACjBI,EACbC,MAAM,EAAG,GACTP,KAAIQ,GAAWT,EAAOS,KACtBC,KAAK,uCAENjB,EAAKkB,YAAYN,4IAiDzB,SAAmCO,GAEL,MAAtBC,EAAaD,EAAU,GAAM,IAKnC,OAF0BE,KAAKC,MAAmB,IAAbF,GAAoB,G,CApDhBG,CACnCV,8ZAcHI,KAAK,G,EAvEHO,iBACL,IACE,IAAIjB,EAAS,GAEb,MAAMkB,QAhBHD,iBACL,IAIE,aAHuB7B,EAAA+B,IAAIC,IACzB,gEAEcF,I,CAChB,MAAOG,GACPC,QAAQC,IAAIF,E,EASOG,GAOnB,UANyB,EAAAC,EAAAC,8BAEdC,SAAQC,IACjB5B,EAAO4B,EAAM1B,IAAM0B,EAAMC,IAAI,IAG3BlC,GAAe,IAAK,CACtB,MAAMmC,EAAQZ,EAAKa,QAAQvB,MAAM,EAAG,GACpCc,QAAQC,IAAIO,GACZxC,EAAK0C,mBACH,YACAlC,EAAyBgC,EAAO9B,G,KAE7B,CACL,MAAM8B,EAAQZ,EAAKa,QAAQvB,MAAM,EAAG,GACpCc,QAAQC,IAAIO,GACZxC,EAAK0C,mBACH,YACAlC,EAAyBgC,EAAO9B,G,EAGpC,MAAOqB,GACPC,QAAQC,IAAIF,E,EAIhBY,GA4CO,MAADC,EAAU3C,SAAS4C,iBAAiB,WAa1C,SAASC,EAAWxB,IAKpB,SAAwBA,GACtByB,aAAezB,EAAOpB,cAAc,kBACpC8C,YAAc1B,EAAOpB,cAAc,gB,CANnC+C,CAAe3B,GASjB,SAA8B4B,EAAQF,YAAYG,WAChD,MAAMC,EAAoBC,WAAWL,YAAYG,WAAa,IAC9DJ,aAAaO,MAAMC,MAAQ,GAAGH,I,CAV9BI,E,CAdEZ,EAAQa,OAAS,GAIrB,WAEE,IAAK,IAAIC,EAAI,EAAGA,EAAId,EAAQa,OAAQC,IAAK,CAEvCZ,EADeF,EAAQc,G,EANzBC","sources":["src/js/weekly-trends.js"],"sourcesContent":["import { api } from './api';\nimport { upcomingMovieGenreRequest } from './apikey.js';\nimport { getMovie } from './modal-card';\n\nconst list = document.querySelector('.weekly-trends-card-list');\nconst date = new Date();\n// const ratindg = document.querySelector('.rating-active');\nconst screenWidth = window.innerWidth;\n\n// Фетч АРІ\nasync function weeklyTrendsRequest() {\n  try {\n    const response = await api.get(\n      '/trending/all/week?api_key=7f4ba582d55c3d33bf97672c5d45e075'\n    );\n    return response.data;\n  } catch (err) {\n    console.log(err);\n  }\n}\n\n// Обробка\nasync function initWeeklyTrendsFetch() {\n  try {\n    let genres = {};\n\n    const data = await weeklyTrendsRequest();\n    const genresData = await upcomingMovieGenreRequest();\n\n    genresData.forEach(genre => {\n      genres[genre.id] = genre.name;\n    });\n\n    if (screenWidth >= 768) {\n      const films = data.results.slice(0, 3);\n      console.log(films);\n      list.insertAdjacentHTML(\n        'beforeend',\n        createWeeklyTrendsMarkup(films, genres)\n      );\n    } else {\n      const films = data.results.slice(0, 1);\n      console.log(films);\n      list.insertAdjacentHTML(\n        'beforeend',\n        createWeeklyTrendsMarkup(films, genres)\n      );\n    }\n  } catch (err) {\n    console.log(err);\n  }\n}\n\ninitWeeklyTrendsFetch();\n\n// Розмітка\nfunction createWeeklyTrendsMarkup(arr, genres) {\n  return arr\n    .map(\n      ({\n        id,\n        title,\n        poster_path,\n        release_date,\n        vote_average,\n        genre_ids,\n      }) => `<li class=\"card-film\"><div class=\"card-container\">\n<img src = \"https://image.tmdb.org/t/p/w500${poster_path}\" alt = \"${title}\" class=\"weekly-trends-film-img\">\n<div class=\"wt-gradient\"></div>\n<div class=\"film-info-poster\">\n<h3 class=\"weekly-trends-film-title\">${title}</h3><div class=\"weekly-trends-info\">\n<span class=\"genre\">${genre_ids\n        .slice(0, 2)\n        .map(genreId => genres[genreId])\n        .join(', ')}</span>\n<span>|</span>\n<span>${date.getFullYear(release_date)}</span></div></div>\n<div class=\"rating weekly-trends-film-rating\"><div class=\"rating-body\">\n<div class=\"rating-active\" style=\"width: ${convertRatingToPercentage(\n        vote_average\n      )}%;\"></div>\n<div class=\"rating-items\">\n<input type=\"radio\" class=\"reting-item\" value=\"1\" name=\"rating\">\n<input type=\"radio\" class=\"reting-item\" value=\"2\" name=\"rating\">\n<input type=\"radio\" class=\"reting-item\" value=\"3\" name=\"rating\">\n<input type=\"radio\" class=\"reting-item\" value=\"4\" name=\"rating\">\n<input type=\"radio\" class=\"reting-item\" value=\"5\" name=\"rating\">\n</div>\n</div>\n</div>\n</div>\n</li>`\n    )\n    .join('');\n}\n\n//   Зірочки\nconst ratings = document.querySelectorAll('.rating');\nif (ratings.length > 0) {\n  initRatings();\n}\n\nfunction initRatings() {\n  let ratingActive, ratingValue;\n  for (let i = 0; i < ratings.length; i++) {\n    const rating = ratings[i];\n    initRating(rating);\n  }\n}\n\nfunction initRating(rating) {\n  initRatingVars(rating);\n  setRetingActiveWidth();\n}\n\nfunction initRatingVars(rating) {\n  ratingActive = rating.querySelector('.rating-active');\n  ratingValue = rating.querySelector('.rating-value');\n}\n\nfunction setRetingActiveWidth(index = ratingValue.innerHTML) {\n  const ratingActiveWidth = parseFloat(ratingValue.innerHTML) / 0.05;\n  ratingActive.style.width = `${ratingActiveWidth}%`;\n}\n\nfunction convertRatingToPercentage(rating) {\n  // Перетворюємо рейтинг у відсотки\n  const percentage = (rating / 10) * 100;\n\n  // Округлюємо значення до двох знаків після коми\n  const roundedPercentage = Math.round(percentage * 100) / 100;\n\n  return roundedPercentage;\n}\n\n// Прослуховувач на картку\n// list.addEventListener('click', onClick);\n\n// function onClick(event) {\n//   const clickCard = event.target;\n\n//   if (event.target.nodeName !== 'DIV') {\n//     return;\n//   } console.dir(clickCard);//\n// }\n"],"names":["$7rYDH","parcelRequire","$d395fb91404b7f70$var$list","document","querySelector","$d395fb91404b7f70$var$date","Date","$d395fb91404b7f70$var$screenWidth","window","innerWidth","$d395fb91404b7f70$var$createWeeklyTrendsMarkup","arr","genres","map","id","title","poster_path","release_date","vote_average","genre_ids","slice","genreId","join","getFullYear","rating","percentage","Math","round","$d395fb91404b7f70$var$convertRatingToPercentage","async","data","api","get","err","console","log","$d395fb91404b7f70$var$weeklyTrendsRequest","$3iMKl","upcomingMovieGenreRequest","forEach","genre","name","films","results","insertAdjacentHTML","$d395fb91404b7f70$var$initWeeklyTrendsFetch","$d395fb91404b7f70$var$ratings","querySelectorAll","$d395fb91404b7f70$var$initRating","ratingActive","ratingValue","$d395fb91404b7f70$var$initRatingVars","index","innerHTML","ratingActiveWidth","parseFloat","style","width","$d395fb91404b7f70$var$setRetingActiveWidth","length","i","$d395fb91404b7f70$var$initRatings"],"version":3,"file":"index.0e378910.js.map"}