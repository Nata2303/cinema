{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAaC,SAASC,cAAc,oBACpCC,EAAiBC,KAAKC,MAAMC,aAAaC,QAAQ,aACvD,IAAIC,EAAkB,GAClBC,EAAe,EA2BnBC,eAAeC,IACb,IACE,IAAKR,EACH,OAEF,MAAMS,EAAeJ,EAAgBC,GAC/BI,QAAa,EAAAf,EAAAgB,mBAAkBF,GAErCH,IAEAT,EAAWe,mBAAmB,YAAiCF,EA+B9DG,KAAIC,IACH,MAAMC,aAAEA,EAAYC,cAAEA,EAAaC,OAAEA,EAAMC,MAAEA,EAAKC,aAAEA,GAClDL,EAEIM,EADcH,EAAOI,MAAM,EAAG,GACNR,KAAIS,GAASA,EAAMC,OAAMC,KAAK,MAE5D,MAAO,4JACwGR,4LA+B9G,SAAmCS,GAEZ,MAAtBC,EAAaD,EAAU,GAAM,IAKnC,OAF0BE,KAAKC,MAAmB,IAAbF,GAAoB,G,CAjCYG,CACzCV,6xBAY4BD,0EACEE,gDAAwDL,EAAaM,MACzH,EACA,mGAKO,IAEVG,KAAK,KA/DNM,QAAQC,IAAIzB,GAERA,EAAeD,EAAgB2B,QACjCnC,EAAWe,mBAAmB,YAvBpC,WACE,GAAIP,EAAgB2B,OAAS,EAC3B,MAAO,yE,CAqBsCC,IASjD,WACE,MAAMC,EAAapC,SAASC,cAAc,aACpCoC,EAAqBrC,SAASsC,iBAAiB,aAGrD,GAFAN,QAAQC,IAAI1B,EAAgB2B,SAEvBE,EACH,OAEFA,EAAWG,iBAAiB,SAAS,KAC/B/B,EAAeD,EAAgB2B,SACjCG,EAAmBG,SAAQC,GAAUA,EAAOC,WAC5ChC,I,IAlBFiC,GACAX,QAAQC,K,CACR,MAAOW,GACPZ,QAAQC,IAAIW,E,GA5ChB,SAA8BC,GAC5B,GAAKA,EAIL,KAAOA,EAAIX,OAAS,GAEW,IAA3B3B,EAAgB2B,QACuC,IAAvD3B,EAAgBA,EAAgB2B,OAAS,GAAGA,QAE5C3B,EAAgBuC,KAAK,IAEvBvC,EAAgBA,EAAgB2B,OAAS,GAAGY,KAAKD,EAAIE,Q,CAWzDC,CAAqB9C,GA+ErBQ","sources":["src/js/library.js"],"sourcesContent":["import { libraryMovieQuery } from './apikey';\n\nconst libraryBox = document.querySelector('.library-js-list');\nconst localStorageId = JSON.parse(localStorage.getItem('movieIds'));\nlet localStorageArr = [];\nlet currentIndex = 0;\n\nfunction serviceArrPagination(arr) {\n  if (!arr) {\n    return;\n  }\n\n  while (arr.length > 0) {\n    if (\n      localStorageArr.length === 0 ||\n      localStorageArr[localStorageArr.length - 1].length === 9\n    ) {\n      localStorageArr.push([]);\n    }\n    localStorageArr[localStorageArr.length - 1].push(arr.shift());\n  }\n}\n\nfunction btnMarkup() {\n  if (localStorageArr.length > 1) {\n    return `<button type=\"button\" class=\"loadMore loadMoreStyle\">Load more</button>`;\n  } else {\n  }\n}\n\nserviceArrPagination(localStorageId);\n\nasync function initLibraryFetch() {\n  try {\n    if (!localStorageId) {\n      return;\n    }\n    const currentArray = localStorageArr[currentIndex];\n    const data = await libraryMovieQuery(currentArray);\n\n    currentIndex++;\n\n    libraryBox.insertAdjacentHTML('beforeend', createLibraryMarkup(data));\n    console.log(currentIndex);\n\n    if (currentIndex < localStorageArr.length) {\n      libraryBox.insertAdjacentHTML('beforeend', btnMarkup());\n    }\n    servicePagination();\n    console.log();\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction servicePagination() {\n  const libraryBtn = document.querySelector('.loadMore');\n  const libraryMoreButtons = document.querySelectorAll('.loadMore');\n  console.log(localStorageArr.length);\n\n  if (!libraryBtn) {\n    return;\n  }\n  libraryBtn.addEventListener('click', () => {\n    if (currentIndex < localStorageArr.length) {\n      libraryMoreButtons.forEach(button => button.remove());\n      initLibraryFetch();\n    }\n  });\n}\n\nfunction createLibraryMarkup(arr) {\n  return arr\n    .map(movie => {\n      const { release_date, backdrop_path, genres, title, vote_average } =\n        movie;\n      const genreSliced = genres.slice(0, 1);\n      const genreName = genreSliced.map(genre => genre.name).join(', ');\n\n      return `<div class=\"library-container-item\">\n                <div class=\"library-container-img\" style=\"background-image: url(https://image.tmdb.org/t/p/original${backdrop_path});\">\n                <div class=\"rating-libr rating-library\">\n                        <div class=\"rating-body\">\n                            <div class=\"rating-active\" style=\"width: ${convertRatingToPercentage(\n                              vote_average\n                            )}%;\"></div>\n                            <div class=\"rating-items\">\n                                <input type=\"radio\" class=\"reting-item\" value=\"1\" name=\"rating\"></>\n                                <input type=\"radio\" class=\"reting-item\" value=\"2\" name=\"rating\"></>\n                                <input type=\"radio\" class=\"reting-item\" value=\"3\" name=\"rating\"></>\n                                <input type=\"radio\" class=\"reting-item\" value=\"4\" name=\"rating\"></>\n                                <input type=\"radio\" class=\"reting-item\" value=\"5\" name=\"rating\"></>\n                            </div>\n                            </div>\n                        </div>\n                    <div class=\"library-container-about\">\n                        <h3 class=\"library-movie-title\">${title}</h3>     \n                        <span class=\"library-genre-title\">${genreName}</span><span class=\"library-genre-title\"> | ${release_date.slice(\n        0,\n        4\n      )}</span>   \n                    </div> \n            </div>\n            </div>\n        </div>`;\n    })\n    .join('');\n}\n\ninitLibraryFetch();\n\nexport function convertRatingToPercentage(rating) {\n  // Перетворюємо рейтинг у відсотки\n  const percentage = (rating / 10) * 100;\n\n  // Округлюємо значення до двох знаків після коми\n  const roundedPercentage = Math.round(percentage * 100) / 100;\n\n  return roundedPercentage;\n}\n"],"names":["$3iMKl","parcelRequire","$1cafa503bc57b7a0$var$libraryBox","document","querySelector","$1cafa503bc57b7a0$var$localStorageId","JSON","parse","localStorage","getItem","$1cafa503bc57b7a0$var$localStorageArr","$1cafa503bc57b7a0$var$currentIndex","async","$1cafa503bc57b7a0$var$initLibraryFetch","currentArray","data","libraryMovieQuery","insertAdjacentHTML","map","movie","release_date","backdrop_path","genres","title","vote_average","genreName","slice","genre","name","join","rating","percentage","Math","round","$1cafa503bc57b7a0$export$ee3a79a376c3be13","console","log","length","$1cafa503bc57b7a0$var$btnMarkup","libraryBtn","libraryMoreButtons","querySelectorAll","addEventListener","forEach","button","remove","$1cafa503bc57b7a0$var$servicePagination","err","arr","push","shift","$1cafa503bc57b7a0$var$serviceArrPagination"],"version":3,"file":"library.0e645c20.js.map"}