{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,aAGA,MAAMC,EAAcC,SAASC,cAAc,mBAE3CC,iBACE,IACE,IAAIC,EAAS,GAEb,MAAMC,QAAa,EAAAP,EAAAQ,+BACM,EAAAR,EAAAS,8BAEdC,SAAQC,IACjBL,EAAOK,EAAMC,IAAMD,EAAME,IAAI,IAG/B,MAAMC,EAAaC,KAAKC,MAAMD,KAAKE,SAAWV,EAAKW,QAAQC,QACrDC,EAAgBb,EAAKW,QAAQJ,GAEnCO,QAAQC,IAAIF,GAEZlB,EAAYqB,mBACV,YAYN,SAA8BC,EAAKlB,GACjC,MAAMmB,aACJA,EAAYC,aACZA,EAAYC,WACZA,EAAUC,cACVA,EAAaC,UACbA,EAASC,SACTA,EAAQC,MACRA,EAAKC,WACLA,GACER,EACES,EAAaJ,EAChBK,MAAM,EAAG,GACTC,KAAIC,GAAW9B,EAAO8B,KACtBC,KAAK,MAER,MAAO,0FAC8CT,WAAuBG,6HAE5BA,mPAION,gPAIeC,2EAAsFC,iPAI1FK,EAAWM,QACrD,yNAK6BL,mLAIFH,sI,CApD/CS,CAAqBnB,EAAed,IA0D1C,SAAqBM,GACnB,MAAM4B,EAAcrC,SAASC,cAAc,cAE3CoC,EAAYC,iBAAiB,SAAS,KACpC,GAAID,EAAYE,UAAUC,SAAS,YAAa,CAC9CH,EAAYE,UAAUE,OAAO,YAC7BJ,EAAYK,YAAc,yBAE1B,MAAMC,EAAWC,KAAKC,MAAMC,aAAaC,QAAQ,cAAgB,GAC5DJ,EAASK,SAASvC,KAEWkC,EAAvBM,KAAKxC,GACdqC,aAAaI,QAAQ,WAAYN,KAAKO,UAAUR,KAGlDzB,QAAQC,IAAI,kCAAmCV,E,KAC1C,CACL4B,EAAYE,UAAUa,IAAI,YAC1B,MAAMT,EAAWC,KAAKC,MAAMC,aAAaC,QAAQ,cAAgB,GAC3DM,EAAQV,EAASW,QAAQ7C,IACjB,IAAV4C,IAE2BV,EAApBY,OAAOF,EAAO,GACvBP,aAAaI,QAAQ,WAAYN,KAAKO,UAAUR,KAGlDN,EAAYK,YAAc,oBAC1BxB,QAAQC,IAAI,oCAAqCV,E,KAlFnD+C,CAAYvC,EAAcR,G,CAC1B,MAAOgD,GACPvC,QAAQC,IAAIsC,E,EAIhBC","sources":["src/js/month-trend.js"],"sourcesContent":["import { upcomingMovieGenreRequest } from './apikey.js';\nimport { upcomingMovieRequest } from './apikey.js';\n\nconst upcomingBox = document.querySelector('.upcom-js-list');\n\nasync function initUpcomingFetch() {\n  try {\n    let genres = {};\n\n    const data = await upcomingMovieRequest();\n    const genresData = await upcomingMovieGenreRequest();\n\n    genresData.forEach(genre => {\n      genres[genre.id] = genre.name;\n    });\n\n    const randomData = Math.floor(Math.random() * data.results.length);\n    const randomDataRes = data.results[randomData];\n\n    console.log(randomDataRes);\n\n    upcomingBox.insertAdjacentHTML(\n      'beforeend',\n      createUpcomingMarkup(randomDataRes, genres)\n    );\n\n    changeClick(randomDataRes.id);\n  } catch (err) {\n    console.log(err);\n  }\n}\n\ninitUpcomingFetch();\n\nfunction createUpcomingMarkup(arr, genres) {\n  const {\n    release_date,\n    vote_average,\n    vote_count,\n    backdrop_path,\n    genre_ids,\n    overview,\n    title,\n    popularity,\n  } = arr;\n  const genreNames = genre_ids\n    .slice(0, 2)\n    .map(genreId => genres[genreId])\n    .join(', ');\n\n  return `<div class=\"upcoming-container\">\n        <img src=\"https://image.tmdb.org/t/p/original${backdrop_path}\" alt=\"${title}\" class=\"upcom-img\" /> \n        <div class=\"upcoming-container-about\">\n            <h3 class=\"upcom-movie-title color\">${title}</h3>\n                <ul class=\"upcoming-list\">\n                    <li class=\"upcoming-list-item\">\n                        <p class=\"upcom-movie-subtitle color\">Release date</p>\n                        <p class=\"upcom-release-date \">${release_date}</p>\n                    </li>\n                    <li class=\"upcoming-list-item\">\n                        <p class=\"upcom-movie-subtitle color\">Vote / Votes</p>\n                        <p class=\"upcom-vote\"><span class=\"vote-span\">${vote_average}</span> <span class=\"slash\">&nbsp/&nbsp</span> <span class=\"vote-span\">${vote_count}</span></p>\n                    </li>\n                    <li class=\"upcoming-list-item\">\n                        <p class=\"upcom-movie-subtitle color\">Popularity</p>\n                        <p class=\"upcom-popularity popular color\">${popularity.toFixed(\n                          1\n                        )}</p>\n                    </li>\n                    <li class=\"upcoming-list-item\">\n                        <p class=\"upcom-movie-subtitle color\">Genre</p>\n                        <p class=\"upcom-genre color\">${genreNames}</p>\n                    </li>\n                </ul>\n                <p class=\"upcom-movie-about-title color\">ABOUT</p>\n                <p class=\"color upcom-movie-about\">${overview}</p>\n                <button type=\"button\" class=\"upcom-btn isActive\">Add to my library</button>\n            </div>\n      </div>`;\n}\n\nfunction changeClick(id) {\n  const upcomingBtn = document.querySelector('.upcom-btn');\n\n  upcomingBtn.addEventListener('click', () => {\n    if (upcomingBtn.classList.contains('isActive')) {\n      upcomingBtn.classList.remove('isActive');\n      upcomingBtn.textContent = 'Remove from my library';\n\n      const movieIds = JSON.parse(localStorage.getItem('movieIds')) || [];\n      if (!movieIds.includes(id)) {\n        // проверяем, есть ли id фильма уже в массиве\n        movieIds.push(id);\n        localStorage.setItem('movieIds', JSON.stringify(movieIds));\n      }\n\n      console.log('Movie ID added to localStorage:', id);\n    } else {\n      upcomingBtn.classList.add('isActive');\n      const movieIds = JSON.parse(localStorage.getItem('movieIds')) || [];\n      const index = movieIds.indexOf(id);\n      if (index !== -1) {\n        // проверяем, есть ли id фильма в массиве\n        movieIds.splice(index, 1); // удаляем id фильма из массива\n        localStorage.setItem('movieIds', JSON.stringify(movieIds));\n      }\n\n      upcomingBtn.textContent = 'Add to my library';\n      console.log('Movie ID removed to localStorage:', id);\n    }\n  });\n}\n"],"names":["$3iMKl","parcelRequire","$5ec6353dd1ed9310$var$upcomingBox","document","querySelector","async","genres","data","upcomingMovieRequest","upcomingMovieGenreRequest","forEach","genre","id","name","randomData","Math","floor","random","results","length","randomDataRes","console","log","insertAdjacentHTML","arr","release_date","vote_average","vote_count","backdrop_path","genre_ids","overview","title","popularity","genreNames","slice","map","genreId","join","toFixed","$5ec6353dd1ed9310$var$createUpcomingMarkup","upcomingBtn","addEventListener","classList","contains","remove","textContent","movieIds","JSON","parse","localStorage","getItem","includes","push","setItem","stringify","add","index","indexOf","splice","$5ec6353dd1ed9310$var$changeClick","err","$5ec6353dd1ed9310$var$initUpcomingFetch"],"version":3,"file":"index.17e71774.js.map"}