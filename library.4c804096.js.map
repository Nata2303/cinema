{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,0BAEMC,EAAaC,SAASC,cAAc,oBACpCC,EAAiBC,KAAKC,MAAMC,aAAaC,QAAQ,aACnDC,EAAkB,GAClBC,EAAe,EAkBnB,SAASC,IACP,GAAIF,EAAgBG,OAAS,EAC3B,MAAQ,yE,UAOGC,I,OAAAC,EAAgBC,MAAAC,KAAAC,U,UAAhBH,I,OAAAA,EAAfI,EAAAnB,EAAA,CAAAmB,EAAAC,GAAAC,MAAA,SAAAC,I,IAKUC,EACAC,E,8EAJDnB,EAAc,C,uDAGbkB,EAAeb,EAAgBC,G,UAClB,EAAAc,EAAAC,mBAAkBH,G,OAA/BC,EAAIG,EAAAC,KAEVjB,IAEAT,EAAW2B,mBAAmB,YAAaC,EAAoBN,IAC/DO,QAAQC,IAAIrB,GAERA,EAAeD,EAAgBG,QACjCX,EAAW2B,mBAAmB,YAAajB,KAE7CqB,IACAF,QAAQC,M,kDAERD,QAAQC,IAAGL,EAAAO,I,2DAnBgBlB,MAAAC,KAAAC,U,CAuB/B,SAASe,IACP,IAAME,EAAahC,SAASC,cAAc,aACpCgC,EAAqBjC,SAASkC,iBAAiB,aACrDN,QAAQC,IAAItB,EAAgBG,QAEvBsB,GAGLA,EAAWG,iBAAiB,SAAS,WAC/B3B,EAAeD,EAAgBG,SACjCuB,EAAmBG,SAAQ,SAAAC,G,OAAUA,EAAOC,Q,IAC5C3B,I,IAKN,SAASgB,EAAoBY,GAC3B,OAAOA,EACJC,KAAI,SAAAC,GACH,IAqC6BC,EAE3BC,EAvCMC,EACNH,EADMG,aAAcC,EACpBJ,EADoBI,cAAeC,EACnCL,EADmCK,OAAQC,EAC3CN,EAD2CM,MAAOC,EAClDP,EADkDO,aAG9CC,EADcH,EAAOI,MAAM,EAAG,GACNV,KAAI,SAAAW,G,OAASA,EAAMC,I,IAAMC,KAAK,MAE5D,MAAO,4JAI0DC,OAH8CT,EAAc,4LAgBzES,QAevBZ,EA3BLM,EA6BtBL,EAAaD,EAAU,GAAM,IAGTa,KAAKC,MAAmB,IAAbb,GAAoB,KA/B7B,4xBAY8BW,OADFP,EAAM,0EACoDO,OAAxDL,EAAU,gDAG9DK,OAH4GV,EAAaM,MACzH,EACA,GACA,kG,IAMHG,KAAK,G,EAnGV,SAA8Bd,GAC5B,GAAKA,EAIL,KAAOA,EAAI7B,OAAS,GAEW,IAA3BH,EAAgBG,QACuC,IAAvDH,EAAgBA,EAAgBG,OAAS,GAAGA,QAE5CH,EAAgBkD,KAAK,IAEvBlD,EAAgBA,EAAgBG,OAAS,GAAG+C,KAAKlB,EAAImB,Q,CAWzDC,CAAqBzD,GA+ErBS,G","sources":["src/js/library.js"],"sourcesContent":["import { libraryMovieQuery } from './apikey';\n\nconst libraryBox = document.querySelector('.library-js-list');\nconst localStorageId = JSON.parse(localStorage.getItem('movieIds'));\nlet localStorageArr = [];\nlet currentIndex = 0;\n\nfunction serviceArrPagination(arr) {\n  if (!arr) {\n    return;\n  }\n\n  while (arr.length > 0) {\n    if (\n      localStorageArr.length === 0 ||\n      localStorageArr[localStorageArr.length - 1].length === 9\n    ) {\n      localStorageArr.push([]);\n    }\n    localStorageArr[localStorageArr.length - 1].push(arr.shift());\n  }\n}\n\nfunction btnMarkup() {\n  if (localStorageArr.length > 1) {\n    return `<button type=\"button\" class=\"loadMore loadMoreStyle\">Load more</button>`;\n  } else {\n  }\n}\n\nserviceArrPagination(localStorageId);\n\nasync function initLibraryFetch() {\n  try {\n    if (!localStorageId) {\n      return;\n    }\n    const currentArray = localStorageArr[currentIndex];\n    const data = await libraryMovieQuery(currentArray);\n\n    currentIndex++;\n\n    libraryBox.insertAdjacentHTML('beforeend', createLibraryMarkup(data));\n    console.log(currentIndex);\n\n    if (currentIndex < localStorageArr.length) {\n      libraryBox.insertAdjacentHTML('beforeend', btnMarkup());\n    }\n    servicePagination();\n    console.log();\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction servicePagination() {\n  const libraryBtn = document.querySelector('.loadMore');\n  const libraryMoreButtons = document.querySelectorAll('.loadMore');\n  console.log(localStorageArr.length);\n\n  if (!libraryBtn) {\n    return;\n  }\n  libraryBtn.addEventListener('click', () => {\n    if (currentIndex < localStorageArr.length) {\n      libraryMoreButtons.forEach(button => button.remove());\n      initLibraryFetch();\n    }\n  });\n}\n\nfunction createLibraryMarkup(arr) {\n  return arr\n    .map(movie => {\n      const { release_date, backdrop_path, genres, title, vote_average } =\n        movie;\n      const genreSliced = genres.slice(0, 1);\n      const genreName = genreSliced.map(genre => genre.name).join(', ');\n\n      return `<div class=\"library-container-item\">\n                <div class=\"library-container-img\" style=\"background-image: url(https://image.tmdb.org/t/p/original${backdrop_path});\">\n                <div class=\"rating-libr rating-library\">\n                        <div class=\"rating-body\">\n                            <div class=\"rating-active\" style=\"width: ${convertRatingToPercentage(\n                              vote_average\n                            )}%;\"></div>\n                            <div class=\"rating-items\">\n                                <input type=\"radio\" class=\"reting-item\" value=\"1\" name=\"rating\"></>\n                                <input type=\"radio\" class=\"reting-item\" value=\"2\" name=\"rating\"></>\n                                <input type=\"radio\" class=\"reting-item\" value=\"3\" name=\"rating\"></>\n                                <input type=\"radio\" class=\"reting-item\" value=\"4\" name=\"rating\"></>\n                                <input type=\"radio\" class=\"reting-item\" value=\"5\" name=\"rating\"></>\n                            </div>\n                            </div>\n                        </div>\n                    <div class=\"library-container-about\">\n                        <h3 class=\"library-movie-title\">${title}</h3>     \n                        <span class=\"library-genre-title\">${genreName}</span><span class=\"library-genre-title\"> | ${release_date.slice(\n        0,\n        4\n      )}</span>   \n                    </div> \n            </div>\n            </div>\n        </div>`;\n    })\n    .join('');\n}\n\ninitLibraryFetch();\n\nfunction convertRatingToPercentage(rating) {\n  // Перетворюємо рейтинг у відсотки\n  const percentage = (rating / 10) * 100;\n\n  // Округлюємо значення до двох знаків після коми\n  const roundedPercentage = Math.round(percentage * 100) / 100;\n\n  return roundedPercentage;\n}\n"],"names":["$bpxeT","parcelRequire","$93effc6fc56091ad$var$libraryBox","document","querySelector","$93effc6fc56091ad$var$localStorageId","JSON","parse","localStorage","getItem","$93effc6fc56091ad$var$localStorageArr","$93effc6fc56091ad$var$currentIndex","$93effc6fc56091ad$var$btnMarkup","length","$93effc6fc56091ad$var$initLibraryFetch","$93effc6fc56091ad$var$_initLibraryFetch","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","currentArray","data","$hDMWd","libraryMovieQuery","_ctx","sent","insertAdjacentHTML","$93effc6fc56091ad$var$createLibraryMarkup","console","log","$93effc6fc56091ad$var$servicePagination","t0","libraryBtn","libraryMoreButtons","querySelectorAll","addEventListener","forEach","button","remove","arr","map","movie","rating","percentage","release_date","backdrop_path","genres","title","vote_average","genreName","slice","genre","name","join","concat","Math","round","push","shift","$93effc6fc56091ad$var$serviceArrPagination"],"version":3,"file":"library.4c804096.js.map"}